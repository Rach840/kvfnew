(()=>{var e={};e.id=9,e.ids=[9],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},79428:e=>{"use strict";e.exports=require("buffer")},79646:e=>{"use strict";e.exports=require("child_process")},55511:e=>{"use strict";e.exports=require("crypto")},14985:e=>{"use strict";e.exports=require("dns")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},91645:e=>{"use strict";e.exports=require("net")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},11723:e=>{"use strict";e.exports=require("querystring")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},22159:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=t(70260),a=t(28203),l=t(25155),o=t.n(l),n=t(67292),i={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);t.d(r,i);let d=["",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,32283)),"C:\\Users\\rachb\\Downloads\\Telegram Desktop\\kvfnew\\app\\users\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],types:["__DEFAULT__",{},{defaultPage:[()=>Promise.resolve().then(t.t.bind(t,97507,23)),"next/dist/client/components/parallel-route-default.js"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,19611)),"C:\\Users\\rachb\\Downloads\\Telegram Desktop\\kvfnew\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,61129)),"C:\\Users\\rachb\\Downloads\\Telegram Desktop\\kvfnew\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\rachb\\Downloads\\Telegram Desktop\\kvfnew\\app\\users\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/users/page",pathname:"/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},14185:(e,r,t)=>{Promise.resolve().then(t.bind(t,32283))},79337:(e,r,t)=>{Promise.resolve().then(t.bind(t,51055))},27181:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(45512);function a(){return(0,s.jsx)("div",{className:"relative bg-white  w-6/12 container mx-auto flex h-full ring-black/5 max-lg:rounded-t-[2rem] my-6 py-10 shadow ring-1 flex-col overflow-hidden rounded-[calc(theme(borderRadius.lg)+1px)] max-lg:rounded-t-[calc(2rem+1px)]",children:(0,s.jsx)("div",{className:"px-8 py-8 sm:px-10 sm:py-10",children:(0,s.jsx)("h4",{className:"mt-2 text-4xl text-center font-medium tracking-tight text-gray-950 max-lg:text-center",children:"Ошибка, данной страницы не существует"})})})}},51055:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var s=t(45512),a=t(58009),l=t.n(a);t(35348),t(26695);var o=t(76329),n=t(27181);function i(){let[e,r]=l().useState([]),[t,a]=l().useState([]),[i,d]=l().useState(!1),[c,u]=l().useState(null);return console.log(e),console.log(t),c&&"ADMIN"===c.role?(0,s.jsxs)("div",{className:"w-12/12 mx-auto mt-3 ",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-t-xl bg-gray-100 py-3 px-3  pt-4",children:[(0,s.jsxs)("div",{className:"block",children:[(0,s.jsxs)("label",{htmlFor:"from",className:"mx-3  text-lg min-w-0 grow py-1.5 pl-1 pr-3 text-base text-gray-900 placeholder:text-gray-400 focus:outline focus:outline-0 sm:text-sm/6 p-3",children:[" ","Отсортировать в диапазоне времени от:"]}),(0,s.jsxs)("div",{className:"flex items-end",children:[(0,s.jsx)("input",{type:"date",id:"from",className:" w-full p-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 text-base focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"}),(0,s.jsxs)("label",{htmlFor:"from",className:"mx-3  min-w-0 grow py-1.5 pl-1 pr-3 text-base text-gray-900 placeholder:text-gray-400 focus:outline focus:outline-0 sm:text-sm/6 p-3",children:[" ","До:"]}),(0,s.jsx)("input",{type:"date",id:"to",className:"mx-3  w-full p-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 text-base focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"}),(0,s.jsx)("button",{onClick:()=>{d(!1);let e=document.querySelector("#from"),s=document.querySelector("#to"),l=e?.value||"",o=s?.value||"",n=t.filter(e=>{let r=l?new Date(l).getTime():NaN,t=o?new Date(o).getTime():NaN,s=function(e){console.log(e);let[r,t]=e.split(", "),[s,a,l]=r.split(".").map(Number),[o,n,i]=t.split(":").map(Number);return new Date(l,a-1,s,o,n,i).getTime()}(e.passedDate);return isNaN(t)?s>=r:isNaN(r)?s<=t:s>=r&&s<=t});0==n.length&&d(!0),a(t),r(n)},type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"Отсортировать"})]})]}),(0,s.jsx)("button",{onClick:function(){d(!1);let e=document.querySelector("#from"),s=document.querySelector("#to");return e.value="",s.value="",document.querySelector("#search").value="",r(t)},type:"button",className:"mx-3 mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"Очистить фильтры"}),(0,s.jsxs)("div",{className:"flex  items-end ",children:[(0,s.jsxs)("div",{className:"block",children:[(0,s.jsxs)("label",{htmlFor:"from",className:"mx-3  min-w-0 grow py-1.5 pl-1 pr-3 text-base text-gray-900 placeholder:text-gray-400 focus:outline focus:outline-0 sm:text-sm/6 p-3",children:[" ","Выберите категорию начального теста"]}),(0,s.jsxs)("select",{defaultValue:"TRAINING",id:"categorysTest",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[(0,s.jsx)("option",{value:"TRAINING",children:"Тренировочный"}),(0,s.jsx)("option",{value:"QUALIFYING",children:"Отборочный"}),(0,s.jsx)("option",{value:"BASIC",children:"Основной"})]})]}),(0,s.jsx)("button",{onClick:function(){d(!1);let e=document.querySelector("#categorysTest"),s=e?.value,l=t.filter(e=>e.startTest==s);return 0==l.length&&d(!0),a(t),r(l)},type:"button",className:"mx-3 mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"Найти"}),(0,s.jsxs)("div",{className:"block",children:[(0,s.jsxs)("label",{htmlFor:"from",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white ",children:[" ","Найти пользователей по имени или организация:"," "]}),(0,s.jsx)("input",{id:"search",type:"text",placeholder:"Имя или название организации",className:"block w-full p-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 text-base focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"})]}),(0,s.jsx)("button",{onClick:function(){d(!1);let s=document.querySelector("#search"),l=s?.value||"",o=e.filter(e=>e.firstName.toLowerCase().includes(l.toLowerCase())||e.organisation.toLowerCase().includes(l.toLowerCase()));return 0==o.length&&d(!0),a(t),r(o)},type:"button",className:"mx-3 mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"Найти"})]})]}),i?(0,s.jsx)("div",{className:"relative bg-white container mx-auto flex h-full ring-black/5 max-lg:rounded-t-[2rem] my-6 py-20 shadow ring-1 flex-col overflow-hidden rounded-[calc(theme(borderRadius.lg)+1px)] max-lg:rounded-t-[calc(2rem+1px)]",children:(0,s.jsx)("h4",{className:"mt-2 text-4xl text-center font-medium tracking-tight text-gray-950 max-lg:text-center",children:"Пользователей с таким параметром нету"})}):(0,s.jsxs)("table",{className:"table-auto w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100",children:[(0,s.jsx)("th",{className:"px-4 py-2",children:"Имя"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Фамилия"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Отчество"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Почта"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Организация"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Специализация"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Уровень начального теста"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Правильных ответов"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Тест пройден"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Когда пройден"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{className:"bg-white border-b cursor-pointer",children:[(0,s.jsx)("td",{className:"px-4 py-2",children:e.firstName}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.lastName}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.surName}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.email}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.organisation}),(0,s.jsx)("td",{className:"px-4 py-2",children:"SCHOOLBOY"==e.role?"Школьники":"STUDENT"==e.role?"Студенты":"Специалисты"}),(0,s.jsx)("td",{className:"px-4 py-2",children:"TRAINING"==e.startTest?"Тренировочный":"QUALIFYING"==e.startTest?"Отборочный":"Основной"}),(0,s.jsx)("td",{children:e.okAnswers}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.testPassed?"✅":"❌"}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.passedDate?e.passedDate.toLocaleString():"-"})]},e.id))})]}),(0,s.jsxs)("div",{className:"flex flex-1 justify-center mt-10 px-10 max-lg:pb-12 max-lg:pt-10 sm:px-10 lg:pb-12",children:[" ",(0,s.jsx)(o.A,{response:e})]})]}):(0,s.jsx)(n.A,{})}},76329:(e,r,t)=>{"use strict";t.d(r,{A:()=>c});var s=t(45512),a=t(58009),l=t(87021),o=t(87920),n=t(5143),i=t(44352);async function d(e){let r=i.Wp.book_new(),t=i.Wp.json_to_sheet(e);i.Wp.book_append_sheet(r,t,"Users");let s=i.M9(r,{type:"buffer",bookType:"xlsx"});return new n.NextResponse(s,{status:200,headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","Content-Disposition":"attachment; filename=users.xlsx"}})}function c({response:e}){let[r,t]=(0,a.useState)(!1),n=async()=>{t(!0);try{let r=await d(e),t=await r.blob(),s=window.URL.createObjectURL(t),a=document.createElement("a");a.style.display="none",a.href=s,a.download="users.xlsx",document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(s)}catch(e){console.error("Ошибка экспортирования пользователей:",e),alert("Ошибка экспортирования пользователей. Повторите попытку.")}finally{t(!1)}};return(0,s.jsx)(l.$,{onClick:n,variant:"outline",className:"bg-green-600 text-white hover:bg-green-700 border-none",title:"Экспортировать пользователей",disabled:r,children:r?"Экспорт...":(0,s.jsx)(o.A,{})})}},87021:(e,r,t)=>{"use strict";t.d(r,{$:()=>c});var s=t(45512),a=t(58009),l=t(12705),o=t(21643),n=t(59462),i=t(6766);let d=(0,o.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md active:translate-y-[1px] text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 disabled:bg-gray-500",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-primary text-primary bg-transparent hover:bg-secondary",secondary:"bg-secondary text-primary hover:bg-secondary/50",ghost:"hover:bg-secondary hover:text-secondary-foreground",link:"text-primary underline-offset-4 hover:underline",succes:"bg-green-600 text-destructive-foreground hover:bg-destructive/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(({className:e,variant:r,size:t,asChild:a=!1,children:o,disabled:c,loading:u,...p},x)=>{let m=a?l.DX:"button";return(0,s.jsx)(m,{disabled:c||u,className:(0,n.cn)(d({variant:r,size:t,className:e})),ref:x,...p,children:u?(0,s.jsx)(i.A,{className:"w-5 h-5 animate-spin"}):o})});c.displayName="Button"},32283:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\rachb\\\\Downloads\\\\Telegram Desktop\\\\kvfnew\\\\app\\\\users\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\rachb\\Downloads\\Telegram Desktop\\kvfnew\\app\\users\\page.tsx","default")},35348:(e,r,t)=>{"use strict";t.d(r,{C:()=>a});var s=t(26248);let a=(0,s.createServerReference)("00d9909268c6282437558928b9eb7fe52fa09feb7d",s.callServer,void 0,s.findSourceMapURL,"getAllUsers")}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[989,934,377,458,390,791],()=>t(22159));module.exports=s})();