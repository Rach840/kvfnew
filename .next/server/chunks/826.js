"use strict";exports.id=826,exports.ids=[826],exports.modules={1839:(e,t,r)=>{r.r(t),r.d(t,{"00da94c5e624ddc6ef000e2b169d099c73b17ffb28":()=>s.q});var s=r(40530)},15310:(e,t,r)=>{r.d(t,{Z:()=>d});var s=r(45512),a=r(6868),i=r(25409),o=r(59462),n=r(44269);r(58009);let l=({onClick:e,className:t})=>(0,s.jsx)("button",{onClick:e,className:(0,o.cn)("absolute right-4 top-1/2 -translate-y-1/2 opacity-30 hover:opacity-100 cursor-pointer",t),children:(0,s.jsx)(n.A,{className:"h-5 w-5"})}),c=({text:e,className:t})=>(0,s.jsx)("p",{className:(0,o.cn)("text-red-500 text-sm",t),children:e}),m=()=>(0,s.jsx)("span",{className:"text-red-500",children:"*"}),d=({className:e,name:t,label:r,required:o,defaultValue:n,...d})=>{let{register:u,formState:{errors:f},watch:p,setValue:y}=(0,a.xW)(),g=p(t),b=f[t]?.message;return(0,s.jsxs)("div",{className:e,children:[r&&(0,s.jsxs)("p",{className:"font-medium mb-2",children:[r," ",o&&(0,s.jsx)(m,{})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(i.p,{defaultValue:n||"",className:"h-12 text-md",...u(t),...d}),g&&(0,s.jsx)(l,{onClick:()=>{y(t,"",{shouldValidate:!0})}})]}),b&&(0,s.jsx)(c,{text:b,className:"mt-2"})]})}},65420:(e,t,r)=>{r.d(t,{A:()=>p});var s=r(45512),a=r(58009),i=r(6868),o=r(86277),n=r(81914),l=r(15310),c=r(87021),m=r(90993),d=r(79334),u=r(19574),f=r(26008);let p=({variant:e})=>{let t=(0,d.useRouter)(),[r,p]=(0,a.useState)(!1),y=(0,i.mN)({resolver:(0,n.u)("email"===e?o.lW:o.X5),defaultValues:"email"===e?{email:""}:{email:"",password:""}}),g=async r=>{try{let s=r.email;console.log(s);let a="email"==e?await (0,m.signIn)("email",{email:s,redirect:!1}):await (0,m.signIn)("credentials",{...r,redirect:!1});if(!a?.ok)throw Error();"email"==e?t.replace("/verification-request"):t.replace("/")}catch(e){console.log(e),p(!0)}};return(0,s.jsx)(i.Op,{...y,children:(0,s.jsxs)("form",{className:" bg-white container w-full  mx-auto lg:w-2/5 border-x-2 border-y-2 rounded-lg my-10 py-10 px-10 mx-auto  border-gray-900/10 pb-12  ",onSubmit:y.handleSubmit(g),children:[(0,s.jsx)("h2",{className:" text-3xl font-semibold text-gray-900",children:"Авторизация"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-gray-600",children:"Авторизируйся для доступа к тестам"}),r?(0,s.jsx)(u.A,{severity:"error",children:"Такого пользователя не существует!."}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)("div",{className:"mt-10 ",children:(0,s.jsxs)("div",{className:"mx-auto",children:[(0,s.jsx)("label",{htmlFor:"first-name",className:"block text-sm/6 font-medium text-gray-900"}),(0,s.jsx)(l.Z,{className:"my-3",name:"email",label:"E-Mail",required:!0}),"email"!=e?(0,s.jsx)(l.Z,{name:"password",label:"Пароль",type:"password",required:!0}):"",(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(c.$,{loading:y.formState.isSubmitting,className:"  duration-300  rounded-md bg-indigo-600 px-5 py-6 text-lg my-4 font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",type:"submit",children:"Войти"}),"email"!=e?(0,s.jsx)(f.default,{className:"  duration-300  rounded-md bg-zinc-800 px-5 py-3 text-sm my-4 font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",href:"/login-with-email",children:"Войти по электронной почте"}):""]})]})})]})})}},86277:(e,t,r)=>{r.d(t,{Do:()=>n,IK:()=>o,X5:()=>a,lW:()=>i});var s=r(16131);let a=s.z.object({email:s.z.string().email({message:"Введите корректную почту"}),password:s.z.string().min(6,{message:"Пароль должен содержать минимум 6 символов"}).refine(e=>/[A-Z]/.test(e),{message:"Пароль должен содержать хотя бы одну заглавную букву"}).refine(e=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(e),{message:"Пароль должен содержать хотя бы один специальный символ"}).refine(e=>/[0-9]/.test(e),{message:"Пароль должен содержать хотя бы одну цифру"})}),i=s.z.object({email:s.z.string().email({message:"Введите корректную почту"})});s.z.object({name:s.z.string()});let o=s.z.object({name:s.z.string(),nameTranslit:s.z.string(),category:s.z.string(),text:s.z.string()}),n=s.z.object({firstName:s.z.string().min(3,{message:"Имя пользователя должно содержать минимум 3 символа"}),lastName:s.z.string().min(3,{message:"Фамилия пользователя должна содержать минимум 3 символа"}),surName:s.z.string(),email:s.z.string().email({message:"Введите корректную почту"}),password:s.z.string().min(6,{message:"Пароль должен содержать минимум 6 символов"}).refine(e=>/[A-Z]/.test(e),{message:"Пароль должен содержать хотя бы одну заглавную букву"}).refine(e=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(e),{message:"Пароль должен содержать хотя бы один специальный символ"}).refine(e=>/[0-9]/.test(e),{message:"Пароль должен содержать хотя бы одну цифру"}),organisation:s.z.string(),role:s.z.string().min(1,{message:"Выберите категорию"}),startTest:s.z.string().min(1,{message:"Выберите уровень теста"})})},87021:(e,t,r)=>{r.d(t,{$:()=>m});var s=r(45512),a=r(58009),i=r(12705),o=r(21643),n=r(59462),l=r(6766);let c=(0,o.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md active:translate-y-[1px] text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 disabled:bg-gray-500",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-primary text-primary bg-transparent hover:bg-secondary",secondary:"bg-secondary text-primary hover:bg-secondary/50",ghost:"hover:bg-secondary hover:text-secondary-foreground",link:"text-primary underline-offset-4 hover:underline",succes:"bg-green-600 text-destructive-foreground hover:bg-destructive/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,children:o,disabled:m,loading:d,...u},f)=>{let p=a?i.DX:"button";return(0,s.jsx)(p,{disabled:m||d,className:(0,n.cn)(c({variant:t,size:r,className:e})),ref:f,...u,children:d?(0,s.jsx)(l.A,{className:"w-5 h-5 animate-spin"}):o})});m.displayName="Button"},25409:(e,t,r)=>{r.d(t,{p:()=>o});var s=r(45512),a=r(58009),i=r(59462);let o=a.forwardRef(({className:e,type:t,...r},a)=>(0,s.jsx)("input",{type:t,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...r}));o.displayName="Input"},71667:(e,t,r)=>{r.d(t,{AH:()=>a,i7:()=>i}),r(58009),r(15031),r(53701);var s=r(25207);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.J)(t)}r(32765),r(29517),r(2834);var i=function(){var e=a.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},2834:(e,t,r)=>{var s=r(57971),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},n={};function l(e){return s.isMemo(e)?o:n[e.$$typeof]||a}n[s.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},n[s.Memo]=o;var c=Object.defineProperty,m=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,r,s){if("string"!=typeof r){if(p){var a=f(r);a&&a!==p&&e(t,a,s)}var o=m(r);d&&(o=o.concat(d(r)));for(var n=l(t),y=l(r),g=0;g<o.length;++g){var b=o[g];if(!i[b]&&!(s&&s[b])&&!(y&&y[b])&&!(n&&n[b])){var x=u(r,b);try{c(t,b,x)}catch(e){}}}}return t}},62407:(e,t)=>{var r="function"==typeof Symbol&&Symbol.for,s=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,n=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,m=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,u=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,y=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,b=r?Symbol.for("react.block"):60121,x=r?Symbol.for("react.fundamental"):60117,v=r?Symbol.for("react.responder"):60118,h=r?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case s:switch(e=e.type){case m:case d:case i:case n:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case u:case g:case y:case l:return e;default:return t}}case a:return t}}}function j(e){return w(e)===d}t.AsyncMode=m,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=s,t.ForwardRef=u,t.Fragment=i,t.Lazy=g,t.Memo=y,t.Portal=a,t.Profiler=n,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return j(e)||w(e)===m},t.isConcurrentMode=j,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===s},t.isForwardRef=function(e){return w(e)===u},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===y},t.isPortal=function(e){return w(e)===a},t.isProfiler=function(e){return w(e)===n},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===d||e===n||e===o||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===y||e.$$typeof===l||e.$$typeof===c||e.$$typeof===u||e.$$typeof===x||e.$$typeof===v||e.$$typeof===h||e.$$typeof===b)},t.typeOf=w},57971:(e,t,r)=>{e.exports=r(62407)},40530:(e,t,r)=>{r.d(t,{q:()=>f});var s=r(21590);r(70376);var a=r(24118),i=r.n(a),o=r(24871),n=r(70709),l=r(37067),c=r(8805),m=r(20441);let d=new(r(96330)).PrismaClient,u={adapter:(0,l.y)(d),pages:{verifyRequest:"/verification-request"},providers:[(0,m.A)({server:{host:process.env.EMAIL_SERVER_HOST,port:process.env.EMAIL_SERVER_PORT,auth:{user:process.env.EMAIL_SERVER_USER,pass:process.env.EMAIL_SERVER_PASSWORD}},from:process.env.EMAIL_FROM}),(0,o.A)({name:"Credentials",credentials:{email:{label:"Email",type:"text"},password:{label:"Password",type:"password"}},async authorize(e){if(!e)return null;let t={email:e.email},r=await n.z.user.findFirst({where:t});return r&&await (0,c.compare)(e.password,r.password)?{id:r.id,name:r.firstName,lastName:r.lastName,surName:r.surName,password:r.password,email:r.email,emailVerified:r.emailVerified,organisation:r.organisation,testPassed:r.testPassed,passedDate:r.passedDate,startTest:r.startTest,role:r.role,testsResult:r.testsResult,okAnswers:r.okAnswers}:null}})],secret:process.env.NEXTAUTH_SECRET,session:{strategy:"jwt"},callbacks:{async signIn({user:e,account:t}){try{if(t?.provider==="credentials")return console.log("всё кайф"),!0;if(!e?.email)return!1;if(t?.provider==="email"){if(await n.z.user.findFirst({where:{email:e.email}}))return!0;return!1}let r=await n.z.user.findFirst({where:{email:e.email}});return console.log(r),!!r}catch(e){console.log("Error [SIGN IN]",e)}return!1},async jwt({token:e}){if(!e.email)return e;let t=await n.z.user.findFirst({where:{email:e.email}});return t&&(e.id=t.id,e.email=t.email,e.name=t.firstName,e.role=t.role),e},session:({session:e,token:t})=>(e?.user&&(e.user.id=t.id,e.user.role=t.role),e)}};async function f(){let e=await (0,a.getServerSession)(u);if(e?.user)return await n.z.user.findFirst({where:{id:e.user.id}})}i()(u),(0,r(99344).D)([f]),(0,s.A)(f,"00da94c5e624ddc6ef000e2b169d099c73b17ffb28",null)},70709:(e,t,r)=>{r.d(t,{z:()=>a});var s=r(96330);let a=globalThis.prismaGlobal??new s.PrismaClient}};