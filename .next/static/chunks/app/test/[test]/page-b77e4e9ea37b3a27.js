(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[536],{49699:(e,t,r)=>{Promise.resolve().then(r.bind(r,78440))},78440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>z});var i=r(95155),a=r(12115),n=r(76046),s=r(14085),l=r(10332),o=r(15785),c=r(75828);let d=(0,c.createServerReference)("407c04408e94abbb077c15edf333b24f1198a40036",c.callServer,void 0,c.findSourceMapURL,"getTestText"),u=(0,c.createServerReference)("70c62eb784636b5509fdf72b5263e8b166a80a2c46",c.callServer,void 0,c.findSourceMapURL,"updateUserStartTestInfo"),m=(0,c.createServerReference)("602d65bdc1356a11ea4724e3c470d7a1c30c099e95",c.callServer,void 0,c.findSourceMapURL,"updateUserTestInfo");var f=r(72790),x=r(45704),h=r(20698),g=r(43463),v=r(7123),p=r(71987),b=r(18120),y=r(98330),w=r(10314),j=r(37410),N=r(31628),S=r(81045),k=r(37157);function A(e){return(0,k.Ay)("MuiCircularProgress",e)}function R(){let e=(0,h._)(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"]);return R=function(){return e},e}function C(){let e=(0,h._)(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"]);return C=function(){return e},e}function M(){let e=(0,h._)(["\n        animation: "," 1.4s linear infinite;\n      "]);return M=function(){return e},e}function D(){let e=(0,h._)(["\n        animation: "," 1.4s ease-in-out infinite;\n      "]);return D=function(){return e},e}(0,S.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);let q=(0,p.i7)(R()),P=(0,p.i7)(C()),F="string"!=typeof q?(0,p.AH)(M(),q):null,L="string"!=typeof P?(0,p.AH)(D(),P):null,_=e=>{let{classes:t,variant:r,color:i,disableShrink:a}=e,n={root:["root",r,"color".concat((0,j.A)(i))],svg:["svg"],circle:["circle","circle".concat((0,j.A)(r)),a&&"circleDisableShrink"]};return(0,v.A)(n,A,t)},O=(0,b.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.variant],t["color".concat((0,j.A)(r.color))]]}})((0,y.A)(e=>{let{theme:t}=e;return{display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:F||{animation:"".concat(q," 1.4s linear infinite")}},...Object.entries(t.palette).filter((0,N.A)()).map(e=>{let[r]=e;return{props:{color:r},style:{color:(t.vars||t).palette[r].main}}})]}})),B=(0,b.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),J=(0,b.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.circle,t["circle".concat((0,j.A)(r.variant))],r.disableShrink&&t.circleDisableShrink]}})((0,y.A)(e=>{let{theme:t}=e;return{stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink},style:L||{animation:"".concat(P," 1.4s ease-in-out infinite")}}]}})),T=a.forwardRef(function(e,t){let r=(0,w.b)({props:e,name:"MuiCircularProgress"}),{className:a,color:n="primary",disableShrink:s=!1,size:l=40,style:o,thickness:c=3.6,value:d=0,variant:u="indeterminate",...m}=r,f={...r,color:n,disableShrink:s,size:l,thickness:c,value:d,variant:u},x=_(f),h={},v={},p={};if("determinate"===u){let e=2*Math.PI*((44-c)/2);h.strokeDasharray=e.toFixed(3),p["aria-valuenow"]=Math.round(d),h.strokeDashoffset="".concat(((100-d)/100*e).toFixed(3),"px"),v.transform="rotate(-90deg)"}return(0,i.jsx)(O,{className:(0,g.A)(x.root,a),style:{width:l,height:l,...v,...o},ownerState:f,ref:t,role:"progressbar",...p,...m,children:(0,i.jsx)(B,{className:x.svg,ownerState:f,viewBox:"".concat(22," ").concat(22," ").concat(44," ").concat(44),children:(0,i.jsx)(J,{className:x.circle,style:h,ownerState:f,cx:44,cy:44,r:(44-c)/2,fill:"none",strokeWidth:c})})})});var E=r(82923),I=r(67396),U=r(13770);function z(){var e;let t=(0,n.usePathname)().replace("/test/",""),[r,c]=a.useState([]),[h,g]=a.useState([]),[v,p]=a.useState(!1),[b,y]=a.useState(),[w,j]=a.useState(1),[N,S]=a.useState(!0),[k,A]=a.useState(null),[R,C]=a.useState(),[M,D]=a.useState(),q=(0,n.useRouter)();a.useEffect(()=>{(async()=>{try{let e=await (0,f.q)();null!=e&&C(e),!e||(null==e?void 0:e.emailVerified)||q.replace("/verification-request"),S(!0);let r=await d(t);if(y(null==r?void 0:r.name),r&&"text"in r){let e=function(e){let t,r;for(let i=e.length;0!==i;)r=Math.floor(Math.random()*i),t=e[--i],e[i]=e[r],e[r]=t;return e}(JSON.parse(r.text));console.log(e),c(e),g(Array(e.length).fill(-1))}else A("Test not found or invalid data")}catch(e){console.log(e),A("Failed to load test")}finally{S(!1)}})()},[t]);let[P,F]=(0,a.useState)(0);(0,a.useEffect)(()=>{if(R){let e=JSON.parse(R.testsResult);e.length>=1&&D(e.map(e=>e.testName))}},[R]);let L=(e,t)=>{g(r=>{let i=[...r];return i[e]=t,i})},_=-1,O=async()=>{let e=0;if(-1!=(_=h.findIndex(e=>-1==e))){F(_);return}if(r.forEach((t,r)=>{t.correctAnswer===h[r]&&(e+=t.questionScore)}),j(e),p(!0),R){let r=JSON.stringify([...JSON.parse(R.testsResult),{testName:b,score:e,passedDate:new Date().getTime()+""}]);console.log(new Date().getTime()),("otborochnyy-test"==t||"trenirovochnyy-test"==t||"osnovnoy-test"==t)&&await u(Number(R.id),e,new Date().getTime()+""),await m(Number(R.id),r)}else alert("ошибка!")};if((0,a.useEffect)(()=>{if(null==M?void 0:M.includes(b)){let e=JSON.parse(R.testsResult).findIndex(e=>e.testName===b);-1!==e&&j(JSON.parse(R.testsResult)[e].score)}},[M,b,R]),N)return(0,i.jsxs)("div",{className:"container mx-auto p-4",children:[(0,i.jsx)(x.A,{animation:"wave",height:60,width:"40%",style:{marginLeft:"auto",marginRight:"auto",marginBottom:6}}),(0,i.jsxs)("div",{className:"relative w-8/12 container mx-auto flex h-full ring-black/5 max-lg:rounded-t-[2rem] my-6 py-10  shadow ring-1 flex-col overflow-hidden rounded-[calc(theme(borderRadius.lg)+1px)] max-lg:rounded-t-[calc(2rem+1px)] p-4",children:[(0,i.jsx)(x.A,{animation:"wave",height:180,width:"100%",style:{marginBottom:15}}),(0,i.jsx)(x.A,{animation:"wave",height:45,width:"100%",style:{marginBottom:1}}),(0,i.jsx)(x.A,{animation:"wave",height:45,width:"100%",style:{marginBottom:1}}),(0,i.jsx)(x.A,{animation:"wave",height:45,width:"100%",style:{marginBottom:1}}),(0,i.jsx)(x.A,{animation:"wave",height:45,width:"100%",style:{marginBottom:1}})]},P),(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[(0,i.jsx)(x.A,{animation:"wave",height:65,width:"15%",style:{marginRight:8,marginLeft:8}}),(0,i.jsx)(x.A,{animation:"wave",height:65,width:"15%",style:{marginRight:8,marginLeft:8}}),(0,i.jsx)(x.A,{animation:"wave",height:65,width:"15%",style:{marginRight:8,marginLeft:8}})]})]});if(k)return(0,i.jsx)(U.A,{});if(0===r.length)return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"relative container mx-auto flex h-full ring-black/5 max-lg:rounded-t-[2rem] my-6 py-10  shadow ring-1 flex-col overflow-hidden rounded-[calc(theme(borderRadius.lg)+1px)] max-lg:rounded-t-[calc(2rem+1px)]",children:[(0,i.jsx)("div",{className:"px-8 pt-8 sm:px-10 sm:pt-10",children:(0,i.jsx)("h4",{className:"mt-2 text-4xl text-center font-medium tracking-tight text-gray-950 max-lg:text-center",children:"Такого теста нету"})}),(0,i.jsxs)("div",{className:"flex flex-1 justify-center mt-10 px-10 max-lg:pb-12 max-lg:pt-10 sm:px-10 lg:pb-12",children:[(0,i.jsx)(I.default,{href:"/login",className:"duration-300 mr-4 rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Войти"}),(0,i.jsx)(I.default,{href:"/register",className:"duration-300 mr-4 rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Зарегистрироваться"})]})]})});if((null==M?void 0:M.includes(b))||v){let e=w/r.map(e=>Number(e.questionScore)).reduce((e,t)=>e+t,0)*100;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"relative w-full lg:w-8/12 container mx-auto flex h-full ring-black/5 max-lg:rounded-t-[2rem] my-6 py-10  shadow ring-1 flex-col overflow-hidden rounded-[calc(theme(borderRadius.lg)+1px)] max-lg:rounded-t-[calc(2rem+1px)] p-4",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Поздравляем!"}),(0,i.jsx)(T,{className:"mx-auto my-6",size:300,value:e,variant:"determinate"}),(0,i.jsxs)("h4",{className:"text-2xl font-bold mb-4 text-center",children:["Вы решили тест на ","".concat(Math.round(e),"%")]})]})})}return R?(0,i.jsxs)("div",{className:"container mx-auto p-4",children:[(0,i.jsxs)("h1",{className:"text-3xl font-bold mb-4 text-center",children:[b," "]}),-1!=_?(0,i.jsx)(E.A,{severity:"error",children:"Вы полностью не заполнили ответы!."}):(0,i.jsx)(i.Fragment,{}),(0,i.jsxs)("div",{className:"relative w-full lg:w-8/12 bg-white container mx-auto flex h-full ring-black/5 max-lg:rounded-t-[2rem] my-6 py-10  shadow ring-1 flex-col overflow-hidden rounded-[calc(theme(borderRadius.lg)+1px)] max-lg:rounded-t-[calc(2rem+1px)] p-4",children:[(0,i.jsxs)("h2",{className:"text-xl font-semibold mb-2",children:["Вопрос ",P+1,":"," ",r[P].question]}),""==r[P].image?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)("img",{src:r[P].image,className:"mb-4"}),(0,i.jsx)(l.z,{value:(null===(e=h[P])||void 0===e?void 0:e.toString())||"",onValueChange:e=>L(P,parseInt(e)),children:r[P].options.map((e,t)=>(0,i.jsxs)("div",{className:"flex my-2 items-center space-x-2",children:[(0,i.jsx)(l.C,{value:t.toString(),id:"q".concat(P,"-o").concat(t)}),(0,i.jsx)(o.J,{className:"text-lg ",htmlFor:"q".concat(P,"-o").concat(t),children:e})]},t))})]},P),(0,i.jsxs)("div",{className:"flex flex-wrap items-center justify-center",children:[(0,i.jsx)(s.$,{onClick:function(){0<P&&F(P-1)},className:" mt-4",children:"Предыдущий вопрос"}),(0,i.jsx)(s.$,{variant:"destructive",onClick:O,className:"mx-3 mt-4",children:"Завершить тест"}),(0,i.jsx)(s.$,{onClick:function(){P+1<r.length&&F(P+1)},className:"mt-4",children:"Следущий вопрос"})]})]}):(0,i.jsx)(U.A,{})}},13770:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var i=r(95155),a=r(67396);r(12115);let n=e=>{let{variant:t="default"}=e;return(0,i.jsxs)("div",{className:"relative bg-white container mx-auto flex h-full ring-black/5 max-lg:rounded-t-[2rem] my-6 py-10  shadow ring-1 flex-col overflow-hidden rounded-[calc(theme(borderRadius.lg)+1px)] max-lg:rounded-t-[calc(2rem+1px)]",children:[(0,i.jsx)("div",{className:"px-8 pt-8 sm:px-10 sm:pt-10",children:(0,i.jsx)("h4",{className:"mt-2 text-4xl text-center font-medium tracking-tight text-gray-950 max-lg:text-center",children:"default"==t?"Войдите или зарегистрируйтесь и войдите через почту чтобы пройти тестирование":"profile"==t?"Войдите или зарегистрируйтесь  и войдите через почту чтобы увидеть профиль":"Войдите или зарегистрируйтесь и войдите через почту чтобы увидеть страницу"})}),(0,i.jsxs)("div",{className:"flex flex-1 justify-center mt-10 px-10 max-lg:pb-12 max-lg:pt-10 sm:px-10 lg:pb-12",children:[(0,i.jsx)(a.default,{href:"/login",className:"duration-300 mr-4 rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Войти"}),(0,i.jsx)(a.default,{href:"/register",className:"duration-300 mr-4 rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Зарегистрироваться"})]})]})}},14085:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var i=r(95155),a=r(12115),n=r(12317),s=r(31027),l=r(29602),o=r(77594);let c=(0,s.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md active:translate-y-[1px] text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 disabled:bg-gray-500",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-primary text-primary bg-transparent hover:bg-secondary",secondary:"bg-secondary text-primary hover:bg-secondary/50",ghost:"hover:bg-secondary hover:text-secondary-foreground",link:"text-primary underline-offset-4 hover:underline",succes:"bg-green-600 text-destructive-foreground hover:bg-destructive/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:s,asChild:d=!1,children:u,disabled:m,loading:f,...x}=e,h=d?n.DX:"button";return(0,i.jsx)(h,{disabled:m||f,className:(0,l.cn)(c({variant:a,size:s,className:r})),ref:t,...x,children:f?(0,i.jsx)(o.A,{className:"w-5 h-5 animate-spin"}):u})});d.displayName="Button"},15785:(e,t,r)=>{"use strict";r.d(t,{J:()=>c});var i=r(95155),a=r(12115),n=r(46195),s=r(31027),l=r(29602);let o=(0,s.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,i.jsx)(n.b,{ref:t,className:(0,l.cn)(o(),r),...a})});c.displayName=n.b.displayName},10332:(e,t,r)=>{"use strict";r.d(t,{C:()=>c,z:()=>o});var i=r(95155),a=r(12115),n=r(27539),s=r(33565),l=r(29602);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,i.jsx)(n.bL,{className:(0,l.cn)("grid gap-2",r),...a,ref:t})});o.displayName=n.bL.displayName;let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,i.jsx)(n.q7,{ref:t,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),...a,children:(0,i.jsx)(n.C1,{className:"flex  items-center justify-center",children:(0,i.jsx)(s.A,{className:"h-3.5 w-3.5 fill-primary"})})})});c.displayName=n.q7.displayName},29602:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var i=r(43463),a=r(69795);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,i.$)(t))}},72790:(e,t,r)=>{"use strict";r.d(t,{q:()=>a});var i=r(75828);let a=(0,i.createServerReference)("00da94c5e624ddc6ef000e2b169d099c73b17ffb28",i.callServer,void 0,i.findSourceMapURL,"getUserSession")}},e=>{var t=t=>e(e.s=t);e.O(0,[525,839,402,300,923,67,441,517,358],()=>t(49699)),_N_E=e.O()}]);